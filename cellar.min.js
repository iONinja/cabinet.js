Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(a,b){var c=this[a],d=c;delete this[a]&&Object.defineProperty(this,a,{get:function(){return d},set:function(g){return c=d,d=b.call(this,a,c,g)},enumerable:!0,configurable:!0})}}),Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(a){var b=this[a];delete this[a],this[a]=b}});var vault={_load:function(){if(localStorage.vault){var a=JSON.parse(localStorage.vault);this._variables=a.variables,this._globals=a.globals,this._pages=a.pages,this.newDomain=!1}else localStorage.vault=JSON.stringify({pages:[],variables:{}});this._path=window.location.pathname,0>this._pages.indexOf(this._path)?(this._pages.push(this._path),this._variables[this._path]={}):this.newPage=!1},_save:function(){localStorage.vault=JSON.stringify({pages:this._pages,variables:this._variables,globals:this._globals})},_variables:{},_globals:{},_pages:[],_path:"/",newDomain:!0,newPage:!0,sync:function(){var a=null;a=!0==arguments[arguments.length-1]?this._globals:this._variables[this._path];for(var b=0;b<arguments.length;b++)n=arguments[b],n&&(void 0==a[n]?a[n]=window[n]:window[n]=a[n]),this._save(),window.watch(n,function(c,d,e,f){return d in c&&(c[d]=f,this._save()),f}.bind(this,a))},wipe:function(){this._variables={},this._globals={},this.newDomain=!0,this.newPage=!0,delete localStorage.vault}};vault._load();
